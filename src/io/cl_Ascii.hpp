//
// Created by Christian Messe on 2018-12-26.
//

#ifndef BELFEM_CL_ASCII_HPP
#define BELFEM_CL_ASCII_HPP



#include "typedefs.hpp"
#include "cl_Cell.hpp"
#include "filetools.hpp"

namespace belfem
{
//------------------------------------------------------------------------------

    class Ascii
    {
//------------------------------------------------------------------------------
    protected:
//------------------------------------------------------------------------------

              string         mPath;
        const FileMode       mMode;
        Cell< string >       mBuffer;

        bool                 mChangedSinceLastSave = false;

//------------------------------------------------------------------------------
    public:
//------------------------------------------------------------------------------

        Ascii( const string        & aPath,
               const enum FileMode & aMode );

//------------------------------------------------------------------------------

        virtual ~Ascii();

//------------------------------------------------------------------------------

        // save the buffer to the file
        bool
        save();

//------------------------------------------------------------------------------

        void
        print( const std::string & aLine );

//------------------------------------------------------------------------------

        /**
         * return the number of lines
         */
        index_t
        length() const;

//------------------------------------------------------------------------------

        string &
        line( const index_t aLineNumber );

//------------------------------------------------------------------------------

        const string &
        line( const index_t aLineNumber ) const;
//------------------------------------------------------------------------------
    private:
//------------------------------------------------------------------------------

        void
        load_buffer( const bool aParallelMode );

//------------------------------------------------------------------------------
    };

//------------------------------------------------------------------------------
}
#endif //BELFEM_CL_ASCII_HPP
